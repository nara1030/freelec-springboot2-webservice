도서 스터디
=====
* 기간: 2022.07.02 ~ 2022.08.20
* 교재: [스프링 부트와 AWS로 혼자 구현하는 웹서비스](http://www.yes24.com/Product/Goods/83849117)
- - -
## 목차
1. [이슈](#이슈)
2. [더 나아가](#더-나아가)
3. [정리](#정리)

## 이슈
책을 따라하며 생긴 문제 외에 이상하거나 문제가 있었던 부분을 적고 수정해보았다.

1. p189] [구글 로그인 후 구글 닉네임이 아닌 윈도우 사용자명 노출](#구글-로그인-후-구글-닉네임이-아닌-윈도우-사용자명-노출)
2. p181] [로그아웃 후 자동 로그인 되는 이슈](#로그아웃-후-자동-로그인-되는-이슈)
3. 기타] [gitignore 기재 파일 업로드 이슈](#gitignore-기재-파일-업로드-이슈)

### 구글 로그인 후 구글 닉네임이 아닌 윈도우 사용자명 노출
세션에 담은 변수 userName이 화면 상에서 윈도우 환경변수로 노출되는 이슈로 이미 같은 현상을 겪는 분들이 해결방안을 올려놓은 상황이었다([참고](https://github.com/jojoldu/freelec-springboot2-webservice/issues/169)).

##### [목차로 이동](#목차)

### 로그아웃 후 자동 로그인 되는 이슈
책에서는 먼저 REST 형식으로 게시글 CRUD API를 구현하고, 각 페이지와 연동하는 일반 API를 만들어준다. 이후 로그인 기능을 붙여서 게시글 조회를 제외하고는 유저만이 권한을 갖도록 하였다. 하지만 책의 내용대로 구글 로그인을 구현하니 다음과 같은 이슈가 발생했다.

1. 로그인(구글 Oauth)한다.
2. 글 작성 페이지로 이동한다.
3. 글 작성한다.
4. 로그아웃한다.
5. 글 작성 페이지로 이동한다.
6. 취소한다.
7. 로그인 상태로 바뀐다.

즉 로그 아웃 후 글 작성 페이지에서 취소를 누르면, 인덱스 페이지로 이동하게 된다. 이때 자동 로그인되는 이슈가 존재했다. 원인은

##### [목차로 이동](#목차)

### gitignore 기재 파일 업로드 이슈
이미 모든 파일을 git이 추적 중인 경우에 해당한다([참고](https://coding-groot.tistory.com/59)).

1. `.gitignore` 파일을 제대로 작성했는지 확인한다.
2. 수정한 파일 중 무시하고자 하는 파일을 제외하고 커밋해준다.
3. 루트 폴더(최상위 폴더)로 이동해 다음 명령어를 친다.
4. `git rm -r --cached`
5. `git add .`
6. `git commit -m "commit message"`

##### [목차로 이동](#목차)

## 더 나아가
1. 개선] .
2. 추가] Oauth 외 로그인 혼용
    - 폼 로그인 방식(세션? JWT?)
    - SSO
3. 추가] [Exception 처리](#Exception-처리)
4. 추가] 클라이언트 분리
5. 추가] GIT FLOW 적용
6. 추가] Multi Module 프로젝트
    - MSA? JWT?
7. 추가] 로컬/운영 환경 분리
8. 추가] 인수 테스트 작성
    - MockMvc? RestAssured?
9. 추가] ROLE DB 분리

### Exception 처리
현재 권한이 없는 사용자가 글 작성을 하는 경우 등은 에러 페이지 혹은 JSON 에러 메세지가 노출된다. 이를 다음과 같이 해결했다.

1. .
2. .



##### [목차로 이동](#목차)

## 정리
1. 이펙티브 자바] 생성자 대신 정적 팩터리 메서드를 사용할 수 없는지 생각해 보라
2. 이펙티브 자바] 생성자 인자가 많을 때는 Builder 패턴 적용을 고려하라
3. 이펙티브 자바] null 대신 빈 배열이나 컬렉션을 반환하라
4. 이펙티브 자바] Serializable 인터페이스를 구현할 때는 신중하라
5. 클린 코드] 부적절한 static 함수
6. 클린 코드] If/Else 혹은 Switch/Case문보다 다형성을 사용하라
7. 리팩토링] Null 검사를 널 객체에 위임

##### [목차로 이동](#목차)